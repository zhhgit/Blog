---
layout: post
title: "手机联调debug"
description: 手机联调debug
modified: 2016-05-31
category: Web
tags: [Web]
---

调手机上的前后台页面实在有点麻烦。前台JS，后台PHP。

前台调用alert函数。

	alert(params);

后台PHP需要先修改C:\xampp\php目录下的php.ini，打开error_log功能，去掉下面这行的分号，修改后重启Apache。

	;error_log = php_errors.log

error_log会打印在C:\xampp\php\logs\php_error_log文件中。Windows下也用tail命令查看，并监视文件变化（文件有变化后会打印出来）。参考[linux tail命令的使用方法详解](http://www.cnblogs.com/mfryf/p/3336804.html)和[Windows下tail 查看日志命令工具分享](http://www.cnblogs.com/hantianwei/archive/2012/03/14/2395634.html)。

在PHP的代码中，调用以下函数可以打印log信息。

	Util::log($params);

该静态方法的实现为

	class Util {
	    public static function log($msg){
	      if(!is_string($msg)) {
	          $msg = json_encode($msg);
	      }

	      error_log(__FILE__ . ' [log]: ' . $msg . ' on line ' . __LINE__);
	    }
	}

写bat批处理文件，直接双击打开，注意文件命名不要与已有命令重复，runtail.bat置于C:\xampp\php\logs文件夹中

	cd C:\xampp\php\logs
	tail -f php_error_log

打印log时，时区可能不对，可以参考[PHP的php.ini时区设置问题 解决时间相差8小时问题](http://www.smsyun.com/home-index-page-id-169.html)，改完重启Apache。